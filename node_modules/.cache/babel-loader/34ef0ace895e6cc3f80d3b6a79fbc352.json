{"remainingRequest":"/home/david/workspace/kalendar/node_modules/babel-loader/lib/index.js!/home/david/workspace/kalendar/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/david/workspace/kalendar/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/david/workspace/kalendar/src/components/kalendar/kalendar-event.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/david/workspace/kalendar/src/components/kalendar/kalendar-event.vue","mtime":1566976249008},{"path":"/home/david/workspace/kalendar/node_modules/cache-loader/dist/cjs.js","mtime":1564752366860},{"path":"/home/david/workspace/kalendar/node_modules/babel-loader/lib/index.js","mtime":1564752363126},{"path":"/home/david/workspace/kalendar/node_modules/cache-loader/dist/cjs.js","mtime":1564752366860},{"path":"/home/david/workspace/kalendar/node_modules/vue-loader/lib/index.js","mtime":1564752367572}],"contextDependencies":[],"result":["import \"core-js/modules/es6.date.to-iso-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Utils from \"./utils.js\";\nvar isBefore = Utils.isBefore,\n    getLocaleTime = Utils.getLocaleTime;\nexport default {\n  props: ['event', 'total', 'index', 'overlaps'],\n  created: function created() {},\n  inject: ['kalendar_options'],\n  data: function data() {\n    return {\n      inspecting: false,\n      editing: false\n    };\n  },\n  computed: {\n    isPast: function isPast() {\n      var now = getLocaleTime(new Date().toISOString());\n      return isBefore(this.event.start.value, now);\n    },\n    width_value: function width_value() {\n      return \"\".concat(100 / this.total, \"% - \").concat(this.overlaps * 50 / this.total, \"px\");\n    },\n    left_offset: function left_offset() {\n      return \"(\".concat(this.index, \" * (\").concat(this.width_value, \")) + \").concat(this.overlaps * 50, \"px\");\n    },\n    top_offset: function top_offset() {\n      return this.event.start.round_offset ? \"\".concat(this.event.start.round_offset, \"px\") : \"0px\";\n    },\n    distance: function distance() {\n      if (!this.event) return;\n      var multiplier = this.kalendar_options.cell_height / 10; // 0.5 * multiplier for an offset so next cell is easily selected\n\n      return \"\".concat(this.event.distance * multiplier - 0.2 * multiplier, \"px\");\n    },\n    status: function status() {\n      return this.event && this.event.status || this.editing;\n    },\n    information: function information() {\n      var _this$event = this.event,\n          start = _this$event.start,\n          end = _this$event.end,\n          data = _this$event.data,\n          id = _this$event.id,\n          key = _this$event.key;\n      var payload = {\n        start_time: kalendarHelpers.addTimezoneInfo(start.value),\n        end_time: kalendarHelpers.addTimezoneInfo(end.value),\n        kalendar_id: id,\n        key: key,\n        data: data\n      };\n      return payload;\n    },\n    editEvent: function editEvent() {\n      this.$kalendar.closePopups();\n      this.editing = true;\n    },\n    closeEventPopup: function closeEventPopup() {\n      this.editing = false;\n    }\n  }\n};",{"version":3,"sources":["kalendar-event.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,OAAA,KAAA;IACA,Q,GAAA,K,CAAA,Q;IAAA,a,GAAA,K,CAAA,a;AAEA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,UAAA,CADA;AAEA,EAAA,OAFA,qBAEA,CAAA,CAFA;AAGA,EAAA,MAAA,EAAA,CAAA,kBAAA,CAHA;AAIA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAAA,GAJA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,UAAA,GAAA,GAAA,aAAA,CAAA,IAAA,IAAA,GAAA,WAAA,EAAA,CAAA;AACA,aAAA,QAAA,CAAA,KAAA,KAAA,CAAA,KAAA,CAAA,KAAA,EAAA,GAAA,CAAA;AACA,KAJA;AAKA,IAAA,WALA,yBAKA;AACA,uBAAA,MAAA,KAAA,KAAA,iBAAA,KAAA,QAAA,GAAA,EAAA,GAAA,KAAA,KAAA;AACA,KAPA;AAQA,IAAA,WARA,yBAQA;AACA,wBAAA,KAAA,KAAA,iBAAA,KAAA,WAAA,kBAAA,KAAA,QAAA,GAAA,EAAA;AACA,KAVA;AAWA,IAAA,UAXA,wBAWA;AACA,aAAA,KAAA,KAAA,CAAA,KAAA,CAAA,YAAA,aAAA,KAAA,KAAA,CAAA,KAAA,CAAA,YAAA,eAAA;AACA,KAbA;AAcA,IAAA,QAdA,sBAcA;AACA,UAAA,CAAA,KAAA,KAAA,EAAA;AACA,UAAA,UAAA,GAAA,KAAA,gBAAA,CAAA,WAAA,GAAA,EAAA,CAFA,CAGA;;AACA,uBAAA,KAAA,KAAA,CAAA,QAAA,GAAA,UAAA,GAAA,MAAA,UAAA;AACA,KAnBA;AAoBA,IAAA,MApBA,oBAoBA;AACA,aAAA,KAAA,KAAA,IAAA,KAAA,KAAA,CAAA,MAAA,IAAA,KAAA,OAAA;AACA,KAtBA;AAuBA,IAAA,WAvBA,yBAuBA;AAAA,wBACA,KAAA,KADA;AAAA,UACA,KADA,eACA,KADA;AAAA,UACA,GADA,eACA,GADA;AAAA,UACA,IADA,eACA,IADA;AAAA,UACA,EADA,eACA,EADA;AAAA,UACA,GADA,eACA,GADA;AAEA,UAAA,OAAA,GAAA;AACA,QAAA,UAAA,EAAA,eAAA,CAAA,eAAA,CAAA,KAAA,CAAA,KAAA,CADA;AAEA,QAAA,QAAA,EAAA,eAAA,CAAA,eAAA,CAAA,GAAA,CAAA,KAAA,CAFA;AAGA,QAAA,WAAA,EAAA,EAHA;AAIA,QAAA,GAAA,EAAA,GAJA;AAKA,QAAA,IAAA,EAAA;AALA,OAAA;AAOA,aAAA,OAAA;AACA,KAjCA;AAkCA,IAAA,SAlCA,uBAkCA;AACA,WAAA,SAAA,CAAA,WAAA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KArCA;AAsCA,IAAA,eAtCA,6BAsCA;AACA,WAAA,OAAA,GAAA,KAAA;AACA;AAxCA;AARA,CAAA","sourcesContent":["<template>\n  <div class=\"event-card\"\n       :ref=\"`kalendarEventRef-${event.id}`\"\n       :style=\"`\n      height: ${distance}; \n      width: calc(${width_value}); \n      left: calc(${left_offset});\n      top: ${top_offset};\n    `\"\n       @click=\"inspecting = true\"\n       @mouseleave=\"inspecting = false\"\n       :class=\"{\n        'is-past': isPast,\n      'overlaps': overlaps > 0,\n      'two-in-one': total > 1, \n      'inspecting': !!inspecting,\n      'event-card__mini': event.distance <= 10,\n      'event-card__small': (event.distance > 10 && event.distance < 40) || (overlaps > 1) \n    }\">\n    <portal-target v-if=\"status === 'creating' || status === 'popup-initiated'\"\n                   :slot-props=\"information\"\n                   name=\"event-creation\"\n                   slim></portal-target>\n    <portal-target v-else\n                   name=\"event-details\"\n                   :slot-props=\"information\"\n                   slim>\n    </portal-target>\n    <div v-if=\"status === 'popup-initiated'\"\n         class=\"popup-wrapper\">\n      <portal-target name=\"event-popup-form\"\n                     slim\n                     :slot-props=\"information\">\n      </portal-target>\n    </div>\n  </div>\n</template>\n<script>\nimport Utils from './utils.js';\nconst { isBefore, getLocaleTime } = Utils;\n\nexport default {\n  props: ['event', 'total', 'index', 'overlaps'],\n  created() {},\n  inject: ['kalendar_options'],\n  data: () => ({\n    inspecting: false,\n    editing: false,\n  }),\n  computed: {\n    isPast() {\n      let now = getLocaleTime(new Date().toISOString());\n      return isBefore(this.event.start.value, now);\n    },\n    width_value() {\n      return `${100/this.total}% - ${this.overlaps * 50 / this.total}px`;\n    },\n    left_offset() {\n      return `(${this.index} * (${this.width_value})) + ${this.overlaps * 50}px`;\n    },\n    top_offset() {\n      return this.event.start.round_offset ? `${this.event.start.round_offset}px` : `0px`;\n    },\n    distance() {\n      if (!this.event) return;\n      let multiplier = this.kalendar_options.cell_height / 10;\n      // 0.5 * multiplier for an offset so next cell is easily selected\n      return `${(this.event.distance * multiplier) - (0.2 * multiplier)}px`;\n    },\n    status() {\n      return (this.event && this.event.status) || this.editing;\n    },\n    information() {\n      let { start, end, data, id, key } = this.event;\n      let payload = {\n        start_time: kalendarHelpers.addTimezoneInfo(start.value),\n        end_time: kalendarHelpers.addTimezoneInfo(end.value),\n        kalendar_id: id,\n        key,\n        data\n      }\n      return payload;\n    },\n    editEvent() {\n      this.$kalendar.closePopups();\n      this.editing = true;\n    },\n    closeEventPopup() {\n      this.editing = false;\n    },\n  }\n}\n</script>\n<style lang=\"scss\">\n$creator-bg: #34aadc;\n$creator-content: white;\n\n.event-card {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n\n  h4,\n  p,\n  span {\n    margin: 0px;\n  }\n\n  >* {\n    flex: 1;\n    position: relative;\n  }\n\n  &.creating {\n    z-index: -1;\n  }\n\n  &.overlaps>* {\n    border: solid 1px white !important;\n  }\n\n  &.inspecting {\n    z-index: 11 !important;\n\n    .created-event {\n      box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12), 0 3px 5px -1px rgba(0, 0, 0, 0.2);\n      transition: opacity 100ms linear;\n    }\n  }\n\n  &__mini {\n    .created-event > .details-card > * {\n      display: none;\n    }\n\n    .appointment-title,\n    .time {\n      display: block!important;\n      position: absolute;\n      top: 0;\n      font-size: 9px;\n      z-index: 1;\n      overflow: visible;\n      height: 100%;\n    }\n  }\n\n  &__small {\n    .appointment-title {\n      font-size: 80%;\n    }\n\n    .time {\n      font-size: 70%;\n    }\n  }\n\n  &.two-in-one .details-card>* {\n    font-size: 60%;\n  }\n\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0; //z-index: 20!important;\n  //background-color: rgba($creator-bg, .85);\n  color: $creator-content;\n  user-select: none;\n  will-change: height; //padding: 4px 6px;\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p {\n    margin: 0px;\n  }\n}\n\n.time {\n  position: absolute;\n  bottom: 4px;\n  right: 6px;\n  font-size: 11px;\n}\n\n.popup-wrapper {\n  text-shadow: none;\n  color: black;\n  z-index: 10;\n  position: absolute;\n  top: 0;\n  left: calc(100% + 5px);\n  display: flex;\n  flex-direction: column;\n  pointer-events: all;\n  user-select: none;\n  background-color: white;\n  border: solid 1px rgba(black, .08);\n  border-radius: 4px;\n  box-shadow: 0px 2px 12px -3px rgba(black, .3);\n  padding: 10px;\n\n  h4 {\n    color: black;\n    font-weight: 400;\n  }\n\n  input,\n  textarea {\n    border: none;\n    background-color: darken(white, 8);\n    color: lighten(black, 1);\n    border-radius: 4px;\n    padding: 5px 8px;\n    margin-bottom: 5px;\n  }\n}\n\n.created-event {\n  pointer-events: all;\n  position: relative;\n\n  >.details-card {\n    max-width: 100%;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n\n    >h1,\n    h2,\n    h3,\n    h4,\n    p,\n    small,\n    strong,\n    span {\n      text-overflow: ellipsis;\n      overflow: hidden;\n      display: block;\n    }\n  }\n}\n\nul:last-child .popup-wrapper {\n  left: auto;\n  right: 100%;\n  margin-right: 10px;\n}\n\n.day-view ul .popup-wrapper {\n  left: auto;\n  right: auto;\n  width: calc(100% - 10px);\n  top: 10px;\n}\n</style>"],"sourceRoot":"src/components/kalendar"}]}