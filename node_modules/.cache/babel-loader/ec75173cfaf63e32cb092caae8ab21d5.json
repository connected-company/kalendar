{"remainingRequest":"/home/david/workspace/kalendar/node_modules/babel-loader/lib/index.js!/home/david/workspace/kalendar/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/david/workspace/kalendar/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/david/workspace/kalendar/src/components/kalendar/kalendar-weekview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/david/workspace/kalendar/src/components/kalendar/kalendar-weekview.vue","mtime":1566976249008},{"path":"/home/david/workspace/kalendar/node_modules/cache-loader/dist/cjs.js","mtime":1564752366860},{"path":"/home/david/workspace/kalendar/node_modules/babel-loader/lib/index.js","mtime":1564752363126},{"path":"/home/david/workspace/kalendar/node_modules/cache-loader/dist/cjs.js","mtime":1564752366860},{"path":"/home/david/workspace/kalendar/node_modules/vue-loader/lib/index.js","mtime":1564752367572}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.date.to-iso-string\";\nimport \"core-js/modules/es7.string.pad-start\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport KalendarDays from \"./kalendar-day.vue\";\nimport myWorker from '@/components/kalendar/workers';\nimport Utils from \"./utils\";\nvar _isBefore = Utils.isBefore,\n    isToday = Utils.isToday,\n    getHourlessDate = Utils.getHourlessDate,\n    addTimezoneInfo = Utils.addTimezoneInfo,\n    getDatelessHour = Utils.getDatelessHour,\n    getLocaleTime = Utils.getLocaleTime,\n    formatAMPM = Utils.formatAMPM;\nexport default {\n  components: {\n    KalendarDays: KalendarDays\n  },\n  created: function created() {\n    var _this = this;\n\n    this.addHelperMethods();\n    setInterval(function () {\n      return _this.kalendar_options.now = new Date();\n    }, 1000 * 60);\n    this.constructWeek();\n  },\n  inject: ['kalendar_options', 'kalendar_events'],\n  data: function data() {\n    return {\n      hours: null,\n      days: []\n    };\n  },\n  computed: {\n    colsSpace: function colsSpace() {\n      return this.kalendar_options.style === 'flat_design' ? '5px' : '0px';\n    },\n    hourHeight: function hourHeight() {\n      return 6 * this.kalendar_options.cell_height; //this.kalendar_options.cell_height * (60 / this.kalendar_options.split_value); \n      // * this.kalendar_options.hour_parts;\n    },\n    passedtime: function passedtime() {\n      var _this$kalendar_option = this.kalendar_options,\n          day_starts_at = _this$kalendar_option.day_starts_at,\n          day_ends_at = _this$kalendar_option.day_ends_at,\n          now = _this$kalendar_option.now;\n      var time = getLocaleTime(now);\n      var day_starts = \"\".concat(time.split('T')[0], \"T\").concat((day_starts_at + '').padStart(2, 0), \":00:00.000Z\");\n      var day_ends = \"\".concat(time.split('T')[0], \"T\").concat((day_ends_at + '').padStart(2, 0), \":00:00.000Z\");\n      console.log({\n        day_starts: day_starts,\n        day_ends: day_ends,\n        time: time\n      });\n\n      if (new Date(day_ends) - new Date(time) < 0) {\n        return null;\n      }\n\n      if (new Date(time) - new Date(day_starts) < 0) {\n        return null;\n      }\n\n      var label = time.split('T')[1].slice(0, 5);\n\n      if (this.kalendar_options.military_time) {\n        var ampm = formatAMPM(label.split(':')[0]);\n        var ampmlabel = ampm.slice(-2);\n        console.log({\n          ampm: ampm\n        });\n      }\n\n      var distance = (new Date(time) - new Date(day_starts)) / 1000 / 60;\n      return {\n        distance: distance,\n        time: time\n      };\n    }\n  },\n  methods: {\n    _isToday: function _isToday(day) {\n      return isToday(day);\n    },\n    updateAppointments: function updateAppointments(_ref) {\n      var id = _ref.id,\n          data = _ref.data;\n      this.$emit('update', {\n        id: id,\n        data: data\n      });\n    },\n    deleteAppointment: function deleteAppointment(id) {\n      this.$emit('delete', {\n        id: id\n      });\n    },\n    clearAppointments: function clearAppointments() {\n      this.$emit('clear');\n    },\n    isBefore: function isBefore(day) {\n      var now = new Date(this.kalendar_options.now);\n      var formattedNow = getLocaleTime(now.toISOString());\n      return _isBefore(day, getHourlessDate(formattedNow));\n    },\n    constructWeek: function constructWeek() {\n      var _this2 = this;\n\n      var date = this.kalendar_options.current_day.slice(0, 10);\n      var _this$kalendar_option2 = this.kalendar_options,\n          hide_dates = _this$kalendar_option2.hide_dates,\n          hide_days = _this$kalendar_option2.hide_days,\n          view_type = _this$kalendar_option2.view_type;\n      return Promise.all([myWorker.send('getDays', {\n        day: date,\n        options: {\n          hide_dates: hide_dates,\n          hide_days: hide_days,\n          view_type: view_type\n        }\n      }).then(function (reply) {\n        _this2.days = reply; //.slice(0,1);\n      }), myWorker.send('getHours', {\n        hourOptions: {\n          start_hour: this.kalendar_options.day_starts_at,\n          end_hour: this.kalendar_options.day_ends_at\n        }\n      }).then(function (reply) {\n        // Handle the reply\n        _this2.hours = reply;\n      })]);\n    },\n    addHelperMethods: function addHelperMethods() {\n      var _this3 = this;\n\n      this.$kalendar.buildWeek = function () {\n        _this3.constructWeek();\n      };\n\n      this.$kalendar.addNewEvent = function (payload) {\n        if (!payload) return Promise.reject('No payload');\n        var from = payload.from,\n            to = payload.to;\n        if (from.slice(-4) === '000Z') payload.from = addTimezoneInfo(from);\n        if (to.slice(-4) === '000Z') payload.to = addTimezoneInfo(to);\n        var targetRef = payload.from.slice(0, 10);\n        var refObject = _this3.$refs[targetRef];\n\n        if (refObject && refObject[0]) {\n          refObject[0].addEvent(payload);\n        } else {\n          // appointment is not in this view\n          var events = _this3.$kalendar.getEvents();\n\n          events.push(payload);\n\n          _this3.$kalendar.updateEvents(events);\n        }\n      };\n\n      this.$kalendar.removeEvent = function (options) {\n        var day = options.day,\n            key = options.key,\n            id = options.id;\n\n        if (day.length > 10) {\n          day = day.slice(0, 10);\n        }\n\n        console.log('Options:', options);\n        if (!day) return Promise.reject('Day wasn\\'t provided');\n        if (!id) return Promise.reject('No ID was provided');\n        if (!key) return Promise.reject('No key was provided in the object');\n        var targetRef = day;\n\n        _this3.$refs[targetRef][0].removeEvent({\n          id: id,\n          key: key\n        });\n      };\n\n      this.$kalendar.closePopups = function () {\n        var refs = _this3.days.map(function (day) {\n          return day.value.slice(0, 10);\n        });\n\n        refs.forEach(function (ref) {\n          _this3.$refs[ref][0].clearCreatingLeftovers();\n        });\n      };\n    }\n  }\n};",{"version":3,"sources":["kalendar-weekview.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"calendar-wrap\"\n       :style=\"`--space-between-cols: ${colsSpace}`\">\n    <div class=\"sticky-top\">\n      <ul class=\"days\">\n        <li class=\"day-indicator\"\n            :key=\"index\"\n            v-for=\"({value}, index) in (days || [])\"\n            :class=\"{'today': _isToday(value), 'is-before': isBefore(value)}\">\n          <div>\n            <span class=\"letters-date\">{{kalendar_options.formatDayTitle(value)[0]}}</span>\n            <span class=\"number-date\">{{kalendar_options.formatDayTitle(value)[1]}}</span>\n          </div>\n        </li>\n      </ul>\n      <ul class=\"all-day\">\n        <span>All Day</span>\n        <li :key=\"index\"\n            v-for=\"(date, index) in (days || [])\"\n            :class=\"{'all-today': _isToday(date.value), 'is-all-day': false}\"\n            :style=\"`height:${kalendar_options.cell_height + 5}px`\"></li>\n      </ul>\n    </div>\n    <div class=\"dummy-row\"\n         v-if=\"false\">\n      <ul class=\"dummy-days\">\n        <li :key=\"index\"\n            v-for=\"(day, index) in (days || [])\"\n            :style=\"`height:${kalendar_options.cell_height}px`\"></li>\n      </ul>\n    </div>\n    <div class=\"blocks\"\n         v-if=\"hours\">\n      <div class=\"calendar-blocks\">\n        <ul class=\"hours\">\n          <li class=\"hour-row-identifier\"\n              :key=\"index\"\n              v-for=\"(hour, index) in (hours || [])\"\n              v-if=\"hour.visible\"\n              :style=\"`height:${hourHeight}px`\">\n            <span>{{kalendar_options.formatLeftHours(hour.value)}}</span>\n          </li>\n        </ul>\n        <div v-show=\"kalendar_options.style !== 'material_design'\"\n             class=\"hour-indicator-line\"\n             :style=\"`top:${passedtime.distance}px`\">\n          <span class=\"time-value\">{{passedtime.value}}</span>\n          <span class=\"line\"></span>\n        </div>\n        <kalendar-days :day=\"day\"\n                       class=\"building-blocks\"\n                       :class=\"`day-${index+1}`\"\n                       :key=\"day.value.slice(0,10)\"\n                       v-for=\"(day, index) in days\"\n                       :passed-time=\"passedtime.distance\"\n                       :ref=\"day.value.slice(0,10)\">\n        </kalendar-days>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport KalendarDays from './kalendar-day.vue';\nimport myWorker from '@/components/kalendar/workers';\nimport Utils from './utils';\nconst { isBefore, isToday, getHourlessDate, addTimezoneInfo, getDatelessHour, getLocaleTime, formatAMPM } = Utils;\n\nexport default {\n  components: {\n    KalendarDays,\n  },\n  created() {\n    this.addHelperMethods();\n    setInterval(() => this.kalendar_options.now = new Date, 1000 * 60);\n    this.constructWeek();\n  },\n  inject: ['kalendar_options', 'kalendar_events'],\n  data: () => ({\n    hours: null,\n    days: []\n  }),\n  computed: {\n    colsSpace() {\n      return this.kalendar_options.style === 'flat_design' ? '5px' : '0px';\n    },\n    hourHeight() {\n      return 6 * this.kalendar_options.cell_height;\n      //this.kalendar_options.cell_height * (60 / this.kalendar_options.split_value); \n      // * this.kalendar_options.hour_parts;\n    },\n    passedtime() {\n      let { day_starts_at, day_ends_at, now } = this.kalendar_options;\n      let time = getLocaleTime(now);\n      let day_starts = `${time.split('T')[0]}T${(day_starts_at + '').padStart(2,0)}:00:00.000Z`;\n      let day_ends = `${time.split('T')[0]}T${(day_ends_at + '').padStart(2,0)}:00:00.000Z`;\n\n      console.log({ day_starts, day_ends, time });\n\n      if (new Date(day_ends) - new Date(time) < 0) {\n        return null;\n      }\n      if (new Date(time) - new Date(day_starts) < 0) {\n        return null;\n      }\n\n      let label = time.split('T')[1].slice(0, 5);\n      if (this.kalendar_options.military_time) {\n        let ampm = formatAMPM(label.split(':')[0]);\n        let ampmlabel = ampm.slice(-2);\n        console.log({ ampm });\n      }\n      let distance = ((new Date(time) - new Date(day_starts)) / 1000) / 60;\n      return { distance, time };\n    },\n  },\n  methods: {\n    _isToday(day) {\n      return isToday(day);\n    },\n    updateAppointments({ id, data }) {\n      this.$emit('update', { id, data });\n    },\n    deleteAppointment(id) {\n      this.$emit('delete', { id });\n    },\n    clearAppointments() {\n      this.$emit('clear');\n    },\n    isBefore(day) {\n      let now = new Date(this.kalendar_options.now);\n      let formattedNow = getLocaleTime(now.toISOString());\n      return isBefore(day, getHourlessDate(formattedNow));\n    },\n    constructWeek() {\n      const date = this.kalendar_options.current_day.slice(0, 10);\n      const { hide_dates, hide_days, view_type } = this.kalendar_options;\n      return Promise.all([\n        myWorker.send('getDays', {\n          day: date,\n          options: {\n            hide_dates,\n            hide_days,\n            view_type\n          }\n        }).then(reply => {\n          this.days = reply; //.slice(0,1);\n        }),\n\n        myWorker.send('getHours', {\n          hourOptions: {\n            start_hour: this.kalendar_options.day_starts_at,\n            end_hour: this.kalendar_options.day_ends_at\n          }\n        }).then(reply => {\n          // Handle the reply\n          this.hours = reply;\n        })\n      ]);\n    },\n    addHelperMethods() {\n      this.$kalendar.buildWeek = () => {\n        this.constructWeek();\n      };\n      this.$kalendar.addNewEvent = (payload) => {\n        if (!payload) return Promise.reject('No payload');\n\n        let { from, to } = payload;\n        if (from.slice(-4) === '000Z') payload.from = addTimezoneInfo(from);\n        if (to.slice(-4) === '000Z') payload.to = addTimezoneInfo(to);\n        let targetRef = payload.from.slice(0, 10);\n        const refObject = this.$refs[targetRef];\n        if (refObject && refObject[0]) {\n          refObject[0].addEvent(payload);\n        } else {\n          // appointment is not in this view\n          let events = this.$kalendar.getEvents();\n          events.push(payload);\n          this.$kalendar.updateEvents(events);\n        }\n      };\n\n      this.$kalendar.removeEvent = (options) => {\n        let { day, key, id } = options;\n        if (day.length > 10) {\n          day = day.slice(0, 10);\n        }\n        console.log('Options:', options);\n        if (!day)\n          return Promise.reject('Day wasn\\'t provided');\n        if (!id)\n          return Promise.reject('No ID was provided');\n        if (!key)\n          return Promise.reject('No key was provided in the object');\n        let targetRef = day;\n        this.$refs[targetRef][0].removeEvent({ id, key });\n      };\n\n      this.$kalendar.closePopups = () => {\n        let refs = this.days.map(day => day.value.slice(0, 10));\n        refs.forEach(ref => {\n          this.$refs[ref][0].clearCreatingLeftovers();\n        });\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n$blue: #5FB3F2;\n$lblue: #D6EEFC;\n$dblue: #3D79B4;\n$lightgrey: #c7c9d5; //$lightgrey: #F5F4F5;\n$grey: #c7c9d5; //#C1C4C8;\n$a-grey: #666;\n$border-color: transparent;\n$theme-color: #e5e5e5;\n\n.calendar-wrap {\n  display: flex;\n  flex-direction: column;\n\n  ul {\n    list-style: none;\n    padding: 0px;\n\n    >li {\n      display: flex;\n    }\n  }\n}\n\n.sticky-top {\n  position: sticky;\n  top: 0;\n  z-index: 20;\n  background-color: white;\n\n  .days {\n    margin: 0px;\n    display: flex;\n    margin-left: 55px;\n\n    li {\n      display: inline-flex;\n      align-items: flex-end;\n      padding-top: 10px;\n      flex: 1;\n      font-size: 1.1rem;\n      color: $a-grey;\n      font-weight: 300;\n      margin-right: var(--space-between-cols);\n      border-bottom: solid 1px #e5e5e5;\n      padding-bottom: 5px;\n      position: relative;\n      font-size: 18px;\n\n      span {\n        margin-right: 3px;\n      }\n\n      span:first-child {\n        font-size: 20px;\n        font-weight: 500;\n      }\n    }\n\n    .today {\n      border-bottom-color: var(--main-color);\n      color: var(--main-color) !important;\n    }\n\n    .today::after {\n      content: '';\n      position: absolute;\n      height: 2px;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      background-color: var(--main-color);\n    }\n  }\n\n  .all-day {\n    display: flex;\n    margin-bottom: 0px; //border-top: solid 1px #e5e5e5;\n    margin-top: 0px;\n    border-bottom: solid 2px #e5e5e5;\n\n    span {\n      display: flex;\n      align-items: center;\n      padding: 0px 5px;\n      width: 55px;\n      font-weight: 500;\n      font-size: .8rem;\n      color: darken($grey, 5);\n      text-transform: lowercase;\n    }\n\n    li {\n      flex: 1; //border-right: solid 5px $border-color;\n      margin-right: var(--space-between-cols);\n\n      &.all-today {\n        background-color: #FEF4F4;\n      }\n    }\n  }\n}\n\n.dummy-row {\n  display: flex;\n  padding-left: 55px;\n\n  ul {\n    display: flex;\n    flex: 1;\n    margin: 0px;\n  }\n\n  li {\n    flex: 1;\n    height: 15px; //border-right: solid 5px $border-color;\n    margin-right: var(--space-between-cols);\n    border-bottom: solid 1px #e5e5e5;\n  }\n}\n\n.blocks {\n  display: flex;\n  position: relative;\n  height: 100%;\n\n  ul {\n    margin-top: 0px;\n  }\n\n  .building-blocks {\n    flex: 1;\n    margin-right: var(--space-between-cols);\n    margin-bottom: 0px;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .calendar-blocks {\n    width: 100%;\n    display: flex;\n    position: relative;\n  }\n}\n\n.hours {\n  display: flex;\n  flex-direction: column;\n  color: darken($grey, 5);\n  font-weight: 500;\n  font-size: .85rem;\n  width: 55px;\n  height: 100%;\n  margin-bottom: 0px;\n\n  li {\n    color: var(--hour-row-color);\n    border-bottom: solid 1px $border-color;\n    padding-left: 8px;\n\n    span {\n      margin-top: -8px;\n    }\n\n    &:first-child span {\n      visibility: hidden;\n    }\n  }\n}\n</style>"],"sourceRoot":"src/components/kalendar"}]}