(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["chunk-75bff01c"],{"1aae":function(e,t,n){"use strict";var a=n("f7d4"),i=n.n(a);i.a},"20d6":function(e,t,n){"use strict";var a=n("5ca1"),i=n("0a49")(6),r="findIndex",s=!0;r in[]&&Array(1)[r](function(){s=!1}),a(a.P+a.F*s,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(r)},4290:function(e,t,n){"use strict";var a=n("f1f3"),i=n.n(a);i.a},"5df3":function(e,t,n){"use strict";var a=n("02f4")(!0);n("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=a(t,n),this._i+=e.length,{value:e,done:!1})})},f1f3:function(e,t,n){},f611:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calendar-wrap",style:"--space-between-cols: "+e.colsSpace},[n("div",{staticClass:"sticky-top"},[n("ul",{staticClass:"days"},e._l(e.days||[],function(t,a){var i=t.value;return n("li",{key:a,staticClass:"day-indicator",class:{today:e._isToday(i),"is-before":e.isBefore(i)}},[n("div",[n("span",{staticClass:"letters-date"},[e._v(e._s(e.kalendar_options.formatDayTitle(i)[0]))]),n("span",{staticClass:"number-date"},[e._v(e._s(e.kalendar_options.formatDayTitle(i)[1]))])])])}),0),n("ul",{staticClass:"all-day"},[n("span",[e._v("All Day")]),e._l(e.days||[],function(t,a){return n("li",{key:a,class:{"all-today":e._isToday(t.value),"is-all-day":!1},style:"height:"+(e.kalendar_options.cell_height+5)+"px"})})],2)]),e._e(),e.hours?n("div",{staticClass:"blocks"},[n("div",{staticClass:"calendar-blocks"},[n("ul",{staticClass:"hours"},e._l(e.hours||[],function(t,a){return t.visible?n("li",{key:a,staticClass:"hour-row-identifier",style:"height:"+e.hourHeight+"px"},[n("span",[e._v(e._s(e.kalendar_options.formatLeftHours(t.value)))])]):e._e()}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:"material_design"!==e.kalendar_options.style,expression:"kalendar_options.style !== 'material_design'"}],staticClass:"hour-indicator-line",style:"top:"+e.passedtime.distance+"px"},[n("span",{staticClass:"time-value"},[e._v(e._s(e.passedtime.value))]),n("span",{staticClass:"line"})]),e._l(e.days,function(t,a){return n("kalendar-days",{key:t.value.slice(0,10),ref:t.value.slice(0,10),refInFor:!0,staticClass:"building-blocks",class:"day-"+(a+1),attrs:{day:t,"passed-time":e.passedtime.distance}})})],2)]):e._e()])},i=[],r=(n("ac6a"),n("5df3"),n("f576"),n("28a5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{ref:e.day.value+"-reference",staticClass:"kalendar-day",class:{"is-weekend":e.isWeekend,"is-today":e.isToday,creating:e.creator.creating||"popup-initiated"===e.creator.status},staticStyle:{position:"relative"}},[e.isToday?n("div",{ref:"nowIndicator",class:"material_design"===e.kalendar_options.style?"hour-indicator-line":"hour-indicator-tooltip",style:"top:"+e.passedTime+"px"},[n("span",{directives:[{name:"show",rawName:"v-show",value:"material_design"===e.kalendar_options.style,expression:"kalendar_options.style === 'material_design'"}],staticClass:"line"})]):e._e(),e._l(e.day_cells,function(t,a){return n("kalendar-cell",{key:"cell-"+a,attrs:{"constructed-events":e.day_events,creator:e.creator,"cell-data":t,index:a,"temporary-event":e.temporary_event},on:{select:e.updateCreator,reset:function(t){return e.resetEvents()},initiatePopup:function(t){return e.initiatePopup()}}})})],2)}),s=[],l=(n("8e6e"),n("7514"),n("456d"),n("20d6"),n("bd86")),o=n("102f"),d=n("34a4");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){Object(l["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=window.kalendarHelpers.cloneObject,f=o["a"].isToday,p=o["a"].isWeekend,h={props:["day","passedTime"],created:function(){this.renderDay()},components:{kalendarCell:function(){return n.e("chunk-7b61c074").then(n.bind(null,"ac6c"))}},provide:function(){return{kalendarAddEvent:this.addEvent,kalendarClearPopups:this.clearCreatingLeftovers}},inject:["kalendar_options"],mounted:function(){this.kalendar_options.scrollToNow&&this.isToday&&this.scrollView()},computed:{isWeekend:function(){return p(this.day.value)},isToday:function(){return f(this.day.value)}},data:function(){return{creator:{creating:!1,starting_cell:null,original_starting_cell:null,current_cell:null,ending_cell:null,status:null},temporary_event:null,day_cells:[],day_events:null}},methods:{renderDay:function(){var e=this;d["a"].send("getDayCells",{day:this.day.value,hourOptions:{start_hour:this.kalendar_options.day_starts_at,end_hour:this.kalendar_options.day_ends_at}}).then(function(t){return e.day_cells=t,e.getDayEvents(e.$kalendar.getEvents())})},addEvent:function(e){var t=this,n=this.checkEventValidity(e);if(null!==n)return Promise.reject(n);var a=e.from,i=e.to;return a=kalendarHelpers.getLocaleTime(a),i=kalendarHelpers.getLocaleTime(i),d["a"].send("constructNewEvent",{event:u({},e,{from:a,to:i})}).then(function(n){var a=n.key;t.day_events.hasOwnProperty(a)?t.day_events[a].push(n):t.$set(t.day_events,a,[n]);var i=t.$kalendar.getEvents();console.log("Adding event to kalendar",e),i.push(u({},e,{id:n.id})),t.$kalendar.updateEvents(i)})},removeEvent:function(e){var t=this.$kalendar.getEvents(),n=t.findIndex(function(t){return t.id===e.id});if(!(n<0)){t.splice(n,1);var a=this.day_events[e.key].findIndex(function(t){return t.id===e.id});return this.day_events[e.key].splice(a,1),this.$kalendar.updateEvents(t),Promise.resolve()}},checkEventValidity:function(e){var t=e.from,n=e.to;return t&&n?null:"No dates were provided in the payload"},getDayEvents:function(e){var t=this,n=e.map(function(e){return v(e)});return d["a"].send("constructDayEvents",{events:n,day:this.day.value}).then(function(e){t.day_events=e})},clearCreatingLeftovers:function(){for(var e in this.day_events){var t=this.day_events[e].some(function(e){return"popup-initiated"===e.status||"creating"===e.status});if(t){var n=this.day_events[e].filter(function(e){return"completed"===e.status});this.$set(this.day_events,e,n),0===n.length&&delete this.day_events[e]}}this.resetEvents()},resetEvents:function(){(this.creator.creating||null!==this.creator.status)&&(this.creator={creating:!1,starting_cell:null,original_starting_cell:null,current_cell:null,ending_cell:null,status:null,temporary_id:null},this.temporary_event=null)},updateCreator:function(e){if(this.creator=u({},this.validateSelection(e),{status:"creating"}),!1===this.kalendar_options.overlap&&this.day_events.length>0){var t=this.overlapPolice(e);if(t)return this.creator=this.validateSelection(t),this.selectCell(),void this.initiatePopup()}this.selectCell()},validateSelection:function(e){var t=e.original_starting_cell,n=(e.starting_cell,e.current_cell);return"reverse"===e.direction&&t.index>n.index?u({},e,{starting_cell:n,ending_cell:t}):e},selectCell:function(){if(this.creator.creating){var e=this.creator,t=(e.creating,e.ending_cell),n=(e.current_cell,e.starting_cell),a=(e.original_starting_cell,t.index+1);t=this.day_cells[a];var i=new Date(t.value)-new Date(n.value),r=Math.floor(i%864e5/36e5),s=Math.round(i%864e5%36e5/6e4),l=new Date(n.value),o=new Date(t.value),d=s+60*r;this.temporary_event={start:{masked_value:l.toISOString(),value:l.toISOString(),rounded:!1,round_offset:null},end:{masked_value:o.toISOString(),value:o.toISOString(),rounded:!1,round_offset:null},distance:d,status:"creating"}}},initiatePopup:function(){if(!this.creating||"creating"===this.creator.status){this.creator=u({},this.creator,{status:"popup-initiated",creating:!1});var e=this.creator,t=e.ending_cell,n=(e.current_cell,e.starting_cell),a=(e.original_starting_cell,t.index+1);t=this.day_cells[a];var i=new Date(t.value)-new Date(n.value),r=Math.floor(i%864e5/36e5),s=Math.round(i%864e5%36e5/6e4),l=new Date(n.value),o=new Date(t.value),d={start:{masked_value:l.toISOString(),value:l.toISOString(),rounded:!1,round_offset:null},end:{masked_value:o.toISOString(),value:o.toISOString(),rounded:!1,round_offset:null},distance:s+60*r,status:"popup-initiated"},c=this.day_events[n.value];c||(c=[]),c.push(d),this.$set(this.day_events,n.value,c),this.temporary_event=null}},overlapPolice:function(e){var t=this;if(e.current_cell){var n=Object.keys(this.day_events).map(function(e){return t.day_events[e]}).flat().filter(function(t){var n=new Date(e.starting_cell.value),a=new Date(e.ending_cell.value),i=new Date(t.start.value),r=new Date(t.end.value);return a>i&&a<r||n<i&&a>i});if(n&&0!==n.length){var a=e;if("reverse"===e.direction){var i=n[0].end,r=this.day_cells.find(function(e){return e.value===i.masked_value}),s=this.day_cells[r.index];a.starting_cell={value:s.value,index:s.index},a.current_cell={value:s.value,index:s.index}}else{var l=n[0].start,o=this.day_cells.find(function(e){return e.value===l.masked_value}),d=this.day_cells[o.index-1];a.ending_cell={value:d.value,index:d.index}}return a}}},scrollView:function(){var e=this.$refs.nowIndicator.offsetTop;console.log("Scrolling to :",e),setTimeout(function(){window.scroll({top:e,left:0,behavior:"smooth"})},500)}}},_=h,y=(n("1aae"),n("2877")),g=Object(y["a"])(_,r,s,!1,null,null,null),m=g.exports,k=o["a"].isBefore,w=o["a"].isToday,D=o["a"].getHourlessDate,b=o["a"].addTimezoneInfo,O=(o["a"].getDatelessHour,o["a"].getLocaleTime),S=o["a"].formatAMPM,E={components:{KalendarDays:m},created:function(){var e=this;this.addHelperMethods(),setInterval(function(){return e.kalendar_options.now=new Date},6e4),this.constructWeek()},inject:["kalendar_options","kalendar_events"],data:function(){return{hours:null,days:[]}},computed:{colsSpace:function(){return"flat_design"===this.kalendar_options.style?"5px":"0px"},hourHeight:function(){return 6*this.kalendar_options.cell_height},passedtime:function(){var e=this.kalendar_options,t=e.day_starts_at,n=e.day_ends_at,a=e.now,i=O(a),r="".concat(i.split("T")[0],"T").concat((t+"").padStart(2,0),":00:00.000Z"),s="".concat(i.split("T")[0],"T").concat((n+"").padStart(2,0),":00:00.000Z");if(console.log({day_starts:r,day_ends:s,time:i}),new Date(s)-new Date(i)<0)return null;if(new Date(i)-new Date(r)<0)return null;var l=i.split("T")[1].slice(0,5);if(this.kalendar_options.military_time){var o=S(l.split(":")[0]);o.slice(-2);console.log({ampm:o})}var d=(new Date(i)-new Date(r))/1e3/60;return{distance:d,time:i}}},methods:{_isToday:function(e){return w(e)},updateAppointments:function(e){var t=e.id,n=e.data;this.$emit("update",{id:t,data:n})},deleteAppointment:function(e){this.$emit("delete",{id:e})},clearAppointments:function(){this.$emit("clear")},isBefore:function(e){var t=new Date(this.kalendar_options.now),n=O(t.toISOString());return k(e,D(n))},constructWeek:function(){var e=this,t=this.kalendar_options.current_day.slice(0,10),n=this.kalendar_options,a=n.hide_dates,i=n.hide_days,r=n.view_type;return Promise.all([d["a"].send("getDays",{day:t,options:{hide_dates:a,hide_days:i,view_type:r}}).then(function(t){e.days=t}),d["a"].send("getHours",{hourOptions:{start_hour:this.kalendar_options.day_starts_at,end_hour:this.kalendar_options.day_ends_at}}).then(function(t){e.hours=t})])},addHelperMethods:function(){var e=this;this.$kalendar.buildWeek=function(){e.constructWeek()},this.$kalendar.addNewEvent=function(t){if(!t)return Promise.reject("No payload");var n=t.from,a=t.to;"000Z"===n.slice(-4)&&(t.from=b(n)),"000Z"===a.slice(-4)&&(t.to=b(a));var i=t.from.slice(0,10),r=e.$refs[i];if(r&&r[0])r[0].addEvent(t);else{var s=e.$kalendar.getEvents();s.push(t),e.$kalendar.updateEvents(s)}},this.$kalendar.removeEvent=function(t){var n=t.day,a=t.key,i=t.id;if(n.length>10&&(n=n.slice(0,10)),console.log("Options:",t),!n)return Promise.reject("Day wasn't provided");if(!i)return Promise.reject("No ID was provided");if(!a)return Promise.reject("No key was provided in the object");var r=n;e.$refs[r][0].removeEvent({id:i,key:a})},this.$kalendar.closePopups=function(){var t=e.days.map(function(e){return e.value.slice(0,10)});t.forEach(function(t){e.$refs[t][0].clearCreatingLeftovers()})}}}},C=E,x=(n("4290"),Object(y["a"])(C,a,i,!1,null,null,null));t["default"]=x.exports},f7d4:function(e,t,n){}}]);
//# sourceMappingURL=chunk-75bff01c.9a62f066.js.map