{"version":3,"sources":["webpack:///./src/components/kalendar/kalendar-cell.vue?5042","webpack:///./src/components/kalendar/kalendar-cell.vue?7cd8","webpack:///src/components/kalendar/kalendar-cell.vue","webpack:///./src/components/kalendar/kalendar-cell.vue?3b4a","webpack:///./src/components/kalendar/kalendar-cell.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_kalendar_cell_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_kalendar_cell_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","cellData","staticClass","class","selected","is-an-hour","index","has-events","cell_events","length","being-created","being_created","hasPopups","style","kalendar_options","on","mouseover","$event","target","currentTarget","mouseMove","mousedown","mouseDown","mouseup","mouseUp","_l","event","eventIndex","key","attrs","total","overlaps","overlapValue","_e","staticRenderFns","cloneObject","window","kalendarHelpers","kalendar_cellvue_type_script_lang_js_","props","inject","components","KalendarEvent","e","then","bind","computed","all_events","completed_events","concat","constructedEvents","hasOwnProperty","value","temporaryEvent","start","overlappingEvents","_this","Object","keys","map","evKey","flat","filter","cellDate","Date","eventStarts","eventEnds","end","find","ev","status","methods","creator","creating","_this$kalendar_option","read_only","overlap","past_event_creation","now","getLocaleTime","$kalendar","closePopups","payload","original_starting_cell","starting_cell","current_cell","ending_cell","$emit","_this$kalendar_option2","_this$creator","going_down","_objectSpread","direction","resetCreator","kalendar_kalendar_cellvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-7b61c074.46d4858c.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.cellData.visible)?_c('li',{staticClass:\"kalendar-cell\",class:{\n    'selected': _vm.selected, \n    'is-an-hour': (_vm.index+1)%(60/10) === 0,\n    'has-events': _vm.cell_events && _vm.cell_events.length > 0,\n    'being-created': !!_vm.being_created || _vm.hasPopups\n  },style:((\"\\n    height: \" + (_vm.kalendar_options.cell_height) + \"px;\\n  \")),on:{\"mouseover\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.mouseMove()},\"mousedown\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.mouseDown()},\"mouseup\":function($event){return _vm.mouseUp()}}},_vm._l((_vm.cell_events),function(event,eventIndex){return (_vm.cell_events && _vm.cell_events.length)?_c('KalendarEvent',{key:eventIndex,style:(\"z-index: 10\"),attrs:{\"event\":event,\"total\":_vm.cell_events.length,\"index\":eventIndex,\"overlaps\":_vm.overlapValue}}):_vm._e()}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <li v-if=\"cellData.visible\"\n      @mouseover.self=\"mouseMove()\"\n      @mousedown.self=\"mouseDown()\"\n      @mouseup=\"mouseUp()\"\n      class=\"kalendar-cell\"\n      :class=\"{\n      'selected': selected, \n      'is-an-hour': (index+1)%(60/10) === 0,\n      'has-events': cell_events && cell_events.length > 0,\n      'being-created': !!being_created || hasPopups\n    }\"\n      :style=\"`\n      height: ${kalendar_options.cell_height}px;\n    `\">\n    <KalendarEvent :style=\"`z-index: 10`\"\n                   v-if=\"cell_events && cell_events.length\"\n                   v-for=\"(event, eventIndex) in cell_events\"\n                   :event=\"event\"\n                   :key=\"eventIndex\"\n                   :total=\"cell_events.length\"\n                   :index=\"eventIndex\"\n                   :overlaps=\"overlapValue\" />\n  </li>\n</template>\n<script>\nconst { cloneObject } = window.kalendarHelpers;\n\nexport default {\n  props: ['creator', 'index', 'cellData', 'constructedEvents', 'temporaryEvent'],\n  inject: ['kalendar_options'],\n  components: {\n    KalendarEvent: () => import('./kalendar-event.vue'),\n  },\n  computed: {\n    cell_events() {\n      let all_events = [];\n      if (this.completed_events) {\n        all_events = all_events.concat(this.completed_events);\n      }\n      if (this.being_created) {\n        all_events = all_events.concat(this.being_created);\n      }\n      return all_events;\n    },\n    completed_events() {\n      return this.constructedEvents &&\n        this.constructedEvents.hasOwnProperty(this.cellData.value) &&\n        this.constructedEvents[this.cellData.value];\n    },\n    being_created() {\n      return (this.temporaryEvent &&\n        this.temporaryEvent.start.value === this.cellData.value &&\n        this.temporaryEvent);\n    },\n    overlappingEvents() {\n      if (!this.constructedEvents || this.cell_events.length < 1) return [];\n      return Object.keys(this.constructedEvents)\n        .map(evKey => {\n          return this.constructedEvents[evKey]\n        })\n        .flat()\n        .filter(event => {\n          let cellDate = new Date(this.cellData.value);\n          let eventStarts = new Date(event.start.value);\n          let eventEnds = new Date(event.end.value);\n          return eventStarts < cellDate && eventEnds > cellDate;\n        });\n    },\n    overlapValue() {\n      let length = this.overlappingEvents.length;\n      return length > 2 ? 2 : length;\n    },\n    selected() {\n      return this.cell_events && this.cell_events.length > 0;\n    },\n    hasPopups() {\n      return this.selected && !!this.cell_events.find(ev => ev.status === 'popup-initiated');\n    }\n  },\n  methods: {\n    mouseDown() {\n      // user mouse got depressed while outside kalendar-cells\n      // came back in and clicked while the creator was on\n      if (!!this.creator.creating) {\n        this.mouseUp();\n        return;\n      }\n      let { read_only, overlap, past_event_creation } = this.kalendar_options;\n      if(read_only) return;\n\n      // if past_event_creation is set to false, check if cell value is\n      // before current time\n      if (past_event_creation === false) {\n        let now = kalendarHelpers.getLocaleTime(new Date());\n        if (new Date(now) > new Date(this.cellData.value)) {\n          this.mouseUp();\n          return;\n        }\n      }\n\n      // if overlap is set to false, prevent selection on top of\n      // other events\n      if (!overlap && this.cell_events.length > 0) return;\n\n      // close any open popups in the whole kalendar instance\n      // before starting a new one\n      this.$kalendar.closePopups();\n\n      // create a payload consisting of\n      // starting, current, ending and originalStarting cell\n      // starting, current and ending are self explanatory\n      // but originalStarting cell is required\n      // to determine the direction of the scroll/drag\n      let payload = {\n        creating: true,\n        original_starting_cell: cloneObject(this.cellData),\n        starting_cell: cloneObject(this.cellData),\n        current_cell: cloneObject(this.cellData),\n        ending_cell: cloneObject(this.cellData)\n      };\n      this.$emit('select', payload);\n    },\n    mouseMove() {\n      // same guards like in the mouseDown function\n      let { read_only, overlap } = this.kalendar_options;\n      if (read_only) return;\n      if (this.creator && !this.creator.creating) return;\n      let { starting_cell, original_starting_cell, creating } = this.creator;\n\n      // direction of scroll\n      let going_down = this.cellData.index >= starting_cell.index &&\n        starting_cell.index === original_starting_cell.index;\n\n      if (creating) {\n        let payload = {\n          ...this.creator,\n          current_cell: this.cellData,\n          ending_cell: this.cellData,\n          direction: going_down ? 'normal' : 'reverse'\n        };\n        this.$emit('select', payload);\n      }\n    },\n    mouseUp() {\n      if (this.kalendar_options.read_only) return;\n      if (this.creator.creating) {\n        this.$emit('initiatePopup');\n      }\n    },\n    resetCreator() {\n      this.$emit('reset');\n    },\n  },\n}\n</script>\n<style lang=\"scss\">\n$creator-bg: #34aadc;\n$creator-content: white;\n\nli {\n  font-size: 13px;\n  position: relative;\n}\n\n.created-events {\n  //width: 100%;\n  height: 100%;\n}\n\nul.building-blocks {\n  li {\n    z-index: 0;\n    border-bottom: dotted 1px var(--odd-cell-border-color);\n\n    &.first_of_appointment {\n      z-index: 1;\n      opacity: 1; //z-index:0;\n    }\n\n    &.is-an-hour {\n      border-bottom: solid 1px var(--table-cell-border-color);\n    }\n\n    &.has-events {\n      z-index: unset;\n    }\n\n    &.being-created {\n      z-index: 11;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./kalendar-cell.vue?vue&type=template&id=295b0926&\"\nimport script from \"./kalendar-cell.vue?vue&type=script&lang=js&\"\nexport * from \"./kalendar-cell.vue?vue&type=script&lang=js&\"\nimport style0 from \"./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}